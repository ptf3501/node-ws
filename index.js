const _0x45edd4=_0x2a34;(function(_0x359804,_0xd41477){const _0x55e3b0=_0x2a34,_0x259f17=_0x359804();while(!![]){try{const _0x2de30e=-parseInt(_0x55e3b0(0x1b1))/0x1*(-parseInt(_0x55e3b0(0x17d))/0x2)+-parseInt(_0x55e3b0(0x197))/0x3+-parseInt(_0x55e3b0(0x14e))/0x4+-parseInt(_0x55e3b0(0x19c))/0x5*(parseInt(_0x55e3b0(0x14d))/0x6)+-parseInt(_0x55e3b0(0x1a8))/0x7+parseInt(_0x55e3b0(0x195))/0x8*(parseInt(_0x55e3b0(0x152))/0x9)+parseInt(_0x55e3b0(0x184))/0xa;if(_0x2de30e===_0xd41477)break;else _0x259f17['push'](_0x259f17['shift']());}catch(_0x24167d){_0x259f17['push'](_0x259f17['shift']());}}}(_0xb391,0x648da));const os=require('os'),http=require(_0x45edd4(0x18d)),fs=require('fs'),axios=require(_0x45edd4(0x18f)),net=require(_0x45edd4(0x1c1)),path=require('path'),crypto=require('crypto'),{Buffer}=require(_0x45edd4(0x1b5)),{exec,execSync}=require(_0x45edd4(0x196)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x45edd4(0x194)]||'f942c7b7-2070-4f20-ae3a-1f9b54a3371a',NEZHA_SERVER=process['env'][_0x45edd4(0x19b)]||'',NEZHA_PORT=process[_0x45edd4(0x1ae)][_0x45edd4(0x14c)]||'',NEZHA_KEY=process[_0x45edd4(0x1ae)]['NEZHA_KEY']||'',DOMAIN=process[_0x45edd4(0x1ae)][_0x45edd4(0x198)]||_0x45edd4(0x19e),AUTO_ACCESS=process['env'][_0x45edd4(0x16b)]||!![],WSPATH=process[_0x45edd4(0x1ae)]['WSPATH']||UUID[_0x45edd4(0x18a)](0x0,0x8),SUB_PATH=process['env'][_0x45edd4(0x170)]||_0x45edd4(0x1af),NAME=process['env'][_0x45edd4(0x1a7)]||_0x45edd4(0x15e),PORT=process[_0x45edd4(0x1ae)][_0x45edd4(0x15b)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x26be10=_0x45edd4;try{const _0x36fb19=await axios['get']('https://speed.cloudflare.com/meta'),_0x34f596=_0x36fb19['data'];ISP=(_0x34f596[_0x26be10(0x188)]+'-'+_0x34f596[_0x26be10(0x180)])[_0x26be10(0x1b3)](/ /g,'_');}catch(_0x26df12){ISP=_0x26be10(0x1a9);}};GetISP();function _0xb391(){const _0x539e03=['arm64','post','2083','env','sub','connect','811684xhGwbC','data','replace','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','buffer','length','utf-8','text/plain','2096','1.1.1.1','hex','vless://','connection','once','\x20with\x20all\x20DNS\x20servers','readUInt8','net','false','url','split','join','arm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','application/dns-json','aarch64','NEZHA_PORT','323802QZvZRr','2441692UwBbru','&path=%2F','reduce','2087','6576291plyHlo','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','unlink','--tls','createWriteStream','npm\x20is\x20running','&fp=chrome&type=ws&host=','pipe','text/html','PORT','listen','decode','Hug','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','type','sha224','error:\x20','from','end','catch','send','log','test','update','chmod\x20+x\x20npm','AUTO_ACCESS','stream','arch','Automatic\x20Access\x20Task\x20added\x20successfully','map','SUB_PATH','readFile','error','writeFileSync','npm','substr','443','Not\x20Found\x0a','readUInt16BE','message','Server\x20is\x20running\x20on\x20port\x20','toString','true','2QGihvv','get','Answer','asOrganization','Failed\x20to\x20resolve\x20','trojan://','find','6339790qdzhAO','https://amd64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/agent','includes','country','finish','slice','/bin/bash','close','http','then','axios','write','npm\x20running\x20error:','createHash','https://dns.google/resolve?name=','UUID','8vkujbk','child_process','383346UMUdJm','DOMAIN','Status','https://arm64.ssss.nyc.mn/agent','NEZHA_SERVER','50tUWEbN','&type=A','1234.abc.com','writeHead','utf8','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','trim','digest','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20',':443?security=tls&sni=','application/json','NAME','3406347ICTXXl','Unknown','8443'];_0xb391=function(){return _0x539e03;};return _0xb391();}const httpServer=http['createServer']((_0x14809b,_0x15e9b8)=>{const _0xa26b62=_0x45edd4;if(_0x14809b['url']==='/'){const _0x5c3a30=path['join'](__dirname,'index.html');fs[_0xa26b62(0x171)](_0x5c3a30,_0xa26b62(0x1a0),(_0x3d8d65,_0x1af544)=>{const _0x3c00ed=_0xa26b62;if(_0x3d8d65){_0x15e9b8['writeHead'](0xc8,{'Content-Type':_0x3c00ed(0x15a)}),_0x15e9b8['end']('Hello\x20world!');return;}_0x15e9b8[_0x3c00ed(0x19f)](0xc8,{'Content-Type':_0x3c00ed(0x15a)}),_0x15e9b8[_0x3c00ed(0x164)](_0x1af544);});return;}else{if(_0x14809b[_0xa26b62(0x1c3)]==='/'+SUB_PATH){const _0x2406ce=_0xa26b62(0x1bc)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0xa26b62(0x14f)+WSPATH+'#'+NAME+'-'+ISP,_0x40b22a=_0xa26b62(0x182)+UUID+'@'+DOMAIN+_0xa26b62(0x1a5)+DOMAIN+_0xa26b62(0x158)+DOMAIN+_0xa26b62(0x14f)+WSPATH+'#'+NAME+'-'+ISP,_0x30e7fc=_0x2406ce+'\x0a'+_0x40b22a,_0x33f924=Buffer[_0xa26b62(0x163)](_0x30e7fc)['toString']('base64');_0x15e9b8[_0xa26b62(0x19f)](0xc8,{'Content-Type':_0xa26b62(0x1b8)}),_0x15e9b8[_0xa26b62(0x164)](_0x33f924+'\x0a');}else _0x15e9b8['writeHead'](0x194,{'Content-Type':_0xa26b62(0x1b8)}),_0x15e9b8[_0xa26b62(0x164)](_0xa26b62(0x177));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x45edd4(0x1b3)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x45edd4(0x1ba)];function resolveHost(_0x2c193c){return new Promise((_0x17f959,_0xf8480f)=>{const _0x4c88de=_0x2a34;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4c88de(0x168)](_0x2c193c)){_0x17f959(_0x2c193c);return;}let _0xc97fa9=0x0;function _0x557314(){const _0x2129f=_0x4c88de;if(_0xc97fa9>=DNS_SERVERS['length']){_0xf8480f(new Error(_0x2129f(0x181)+_0x2c193c+_0x2129f(0x1bf)));return;}const _0x3c771a=DNS_SERVERS[_0xc97fa9];_0xc97fa9++;const _0x21b515=_0x2129f(0x193)+encodeURIComponent(_0x2c193c)+_0x2129f(0x19d);axios[_0x2129f(0x17e)](_0x21b515,{'timeout':0x1388,'headers':{'Accept':_0x2129f(0x14a)}})[_0x2129f(0x18e)](_0x13de40=>{const _0x2eb908=_0x2129f,_0x1d3e9a=_0x13de40[_0x2eb908(0x1b2)];if(_0x1d3e9a[_0x2eb908(0x199)]===0x0&&_0x1d3e9a[_0x2eb908(0x17f)]&&_0x1d3e9a[_0x2eb908(0x17f)][_0x2eb908(0x1b6)]>0x0){const _0x1e1b98=_0x1d3e9a[_0x2eb908(0x17f)][_0x2eb908(0x183)](_0x288fb8=>_0x288fb8[_0x2eb908(0x160)]===0x1);if(_0x1e1b98){_0x17f959(_0x1e1b98[_0x2eb908(0x1b2)]);return;}}_0x557314();})[_0x2129f(0x165)](_0x2c18b0=>{_0x557314();});}_0x557314();});}function handleVlessConnection(_0x255331,_0x34e93f){const _0x2c7084=_0x45edd4,[_0x424a68]=_0x34e93f,_0x23de8d=_0x34e93f[_0x2c7084(0x18a)](0x1,0x11);if(!_0x23de8d['every']((_0x20428b,_0x286168)=>_0x20428b==parseInt(uuid[_0x2c7084(0x175)](_0x286168*0x2,0x2),0x10)))return![];let _0x49de68=_0x34e93f[_0x2c7084(0x18a)](0x11,0x12)[_0x2c7084(0x1c0)]()+0x13;const _0x212000=_0x34e93f[_0x2c7084(0x18a)](_0x49de68,_0x49de68+=0x2)[_0x2c7084(0x178)](0x0),_0x1b7c97=_0x34e93f[_0x2c7084(0x18a)](_0x49de68,_0x49de68+=0x1)['readUInt8'](),_0x555294=_0x1b7c97==0x1?_0x34e93f[_0x2c7084(0x18a)](_0x49de68,_0x49de68+=0x4)[_0x2c7084(0x1c5)]('.'):_0x1b7c97==0x2?new TextDecoder()[_0x2c7084(0x15d)](_0x34e93f[_0x2c7084(0x18a)](_0x49de68+0x1,_0x49de68+=0x1+_0x34e93f[_0x2c7084(0x18a)](_0x49de68,_0x49de68+0x1)[_0x2c7084(0x1c0)]())):_0x1b7c97==0x3?_0x34e93f['slice'](_0x49de68,_0x49de68+=0x10)[_0x2c7084(0x150)]((_0x5afe8b,_0x3b589c,_0x3329c7,_0x38793d)=>_0x3329c7%0x2?_0x5afe8b['concat'](_0x38793d[_0x2c7084(0x18a)](_0x3329c7-0x1,_0x3329c7+0x1)):_0x5afe8b,[])['map'](_0x33f1a0=>_0x33f1a0[_0x2c7084(0x178)](0x0)[_0x2c7084(0x17b)](0x10))['join'](':'):'';_0x255331[_0x2c7084(0x166)](new Uint8Array([_0x424a68,0x0]));const _0x2a57be=createWebSocketStream(_0x255331);return resolveHost(_0x555294)[_0x2c7084(0x18e)](_0x1cca29=>{const _0x2dd96a=_0x2c7084;net[_0x2dd96a(0x1b0)]({'host':_0x1cca29,'port':_0x212000},function(){const _0xe1d0bf=_0x2dd96a;this[_0xe1d0bf(0x190)](_0x34e93f['slice'](_0x49de68)),_0x2a57be['on'](_0xe1d0bf(0x172),()=>{})[_0xe1d0bf(0x159)](this)['on'](_0xe1d0bf(0x172),()=>{})['pipe'](_0x2a57be);})['on']('error',()=>{});})[_0x2c7084(0x165)](_0x31d3d8=>{const _0x20ed24=_0x2c7084;net[_0x20ed24(0x1b0)]({'host':_0x555294,'port':_0x212000},function(){const _0x139239=_0x20ed24;this['write'](_0x34e93f['slice'](_0x49de68)),_0x2a57be['on']('error',()=>{})[_0x139239(0x159)](this)['on']('error',()=>{})[_0x139239(0x159)](_0x2a57be);})['on'](_0x20ed24(0x172),()=>{});}),!![];}function handleTrojanConnection(_0x27baf2,_0x4146ad){const _0x23fc73=_0x45edd4;try{if(_0x4146ad['length']<0x3a)return![];const _0x3921b6=_0x4146ad[_0x23fc73(0x18a)](0x0,0x38)['toString'](),_0x38bad2=[UUID];let _0x464e28=null;for(const _0x4cc9a5 of _0x38bad2){const _0x113fd5=crypto[_0x23fc73(0x192)](_0x23fc73(0x161))[_0x23fc73(0x169)](_0x4cc9a5)[_0x23fc73(0x1a3)](_0x23fc73(0x1bb));if(_0x113fd5===_0x3921b6){_0x464e28=_0x4cc9a5;break;}}if(!_0x464e28)return![];let _0x51cf7f=0x38;_0x4146ad[_0x51cf7f]===0xd&&_0x4146ad[_0x51cf7f+0x1]===0xa&&(_0x51cf7f+=0x2);const _0x11af45=_0x4146ad[_0x51cf7f];if(_0x11af45!==0x1)return![];_0x51cf7f+=0x1;const _0x232539=_0x4146ad[_0x51cf7f];_0x51cf7f+=0x1;let _0x4f2e7c,_0x55952b;if(_0x232539===0x1)_0x4f2e7c=_0x4146ad[_0x23fc73(0x18a)](_0x51cf7f,_0x51cf7f+0x4)['join']('.'),_0x51cf7f+=0x4;else{if(_0x232539===0x3){const _0x2e7f5f=_0x4146ad[_0x51cf7f];_0x51cf7f+=0x1,_0x4f2e7c=_0x4146ad['slice'](_0x51cf7f,_0x51cf7f+_0x2e7f5f)[_0x23fc73(0x17b)](),_0x51cf7f+=_0x2e7f5f;}else{if(_0x232539===0x4)_0x4f2e7c=_0x4146ad[_0x23fc73(0x18a)](_0x51cf7f,_0x51cf7f+0x10)[_0x23fc73(0x150)]((_0x76f95e,_0x28cbc0,_0x3a5dc6,_0x224318)=>_0x3a5dc6%0x2?_0x76f95e['concat'](_0x224318[_0x23fc73(0x18a)](_0x3a5dc6-0x1,_0x3a5dc6+0x1)):_0x76f95e,[])[_0x23fc73(0x16f)](_0x354a55=>_0x354a55[_0x23fc73(0x178)](0x0)[_0x23fc73(0x17b)](0x10))[_0x23fc73(0x1c5)](':'),_0x51cf7f+=0x10;else return![];}}_0x55952b=_0x4146ad['readUInt16BE'](_0x51cf7f),_0x51cf7f+=0x2;_0x51cf7f<_0x4146ad['length']&&_0x4146ad[_0x51cf7f]===0xd&&_0x4146ad[_0x51cf7f+0x1]===0xa&&(_0x51cf7f+=0x2);const _0x2a006d=createWebSocketStream(_0x27baf2);return resolveHost(_0x4f2e7c)['then'](_0x12b511=>{const _0xed9fc9=_0x23fc73;net['connect']({'host':_0x12b511,'port':_0x55952b},function(){const _0x4d7031=_0x2a34;_0x51cf7f<_0x4146ad[_0x4d7031(0x1b6)]&&this['write'](_0x4146ad[_0x4d7031(0x18a)](_0x51cf7f)),_0x2a006d['on'](_0x4d7031(0x172),()=>{})[_0x4d7031(0x159)](this)['on'](_0x4d7031(0x172),()=>{})['pipe'](_0x2a006d);})['on'](_0xed9fc9(0x172),()=>{});})[_0x23fc73(0x165)](_0x55ca02=>{const _0x8c533d=_0x23fc73;net[_0x8c533d(0x1b0)]({'host':_0x4f2e7c,'port':_0x55952b},function(){const _0x28e76a=_0x8c533d;_0x51cf7f<_0x4146ad[_0x28e76a(0x1b6)]&&this[_0x28e76a(0x190)](_0x4146ad[_0x28e76a(0x18a)](_0x51cf7f)),_0x2a006d['on'](_0x28e76a(0x172),()=>{})[_0x28e76a(0x159)](this)['on'](_0x28e76a(0x172),()=>{})[_0x28e76a(0x159)](_0x2a006d);})['on'](_0x8c533d(0x172),()=>{});}),!![];}catch(_0x454204){return![];}}wss['on'](_0x45edd4(0x1bd),(_0x247a15,_0x33112f)=>{const _0x5a68cb=_0x45edd4,_0x59f21c=_0x33112f['url']||'';_0x247a15[_0x5a68cb(0x1be)](_0x5a68cb(0x179),_0x204961=>{const _0x556e1f=_0x5a68cb;if(_0x204961[_0x556e1f(0x1b6)]>0x11&&_0x204961[0x0]===0x0){const _0x35327d=_0x204961[_0x556e1f(0x18a)](0x1,0x11),_0x2ceb03=_0x35327d['every']((_0x2d9125,_0x179681)=>_0x2d9125==parseInt(uuid[_0x556e1f(0x175)](_0x179681*0x2,0x2),0x10));if(_0x2ceb03){!handleVlessConnection(_0x247a15,_0x204961)&&_0x247a15[_0x556e1f(0x18c)]();return;}}!handleTrojanConnection(_0x247a15,_0x204961)&&_0x247a15[_0x556e1f(0x18c)]();})['on'](_0x5a68cb(0x172),()=>{});});const getDownloadUrl=()=>{const _0x51e471=_0x45edd4,_0x3c6932=os[_0x51e471(0x16d)]();return _0x3c6932===_0x51e471(0x1c6)||_0x3c6932===_0x51e471(0x1ab)||_0x3c6932===_0x51e471(0x14b)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x51e471(0x19a):!NEZHA_PORT?_0x51e471(0x185):_0x51e471(0x186);},downloadFile=async()=>{const _0x253acf=_0x45edd4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x2650d1=getDownloadUrl(),_0x50d36c=await axios({'method':_0x253acf(0x17e),'url':_0x2650d1,'responseType':_0x253acf(0x16c)}),_0x36a80d=fs[_0x253acf(0x156)](_0x253acf(0x174));return _0x50d36c[_0x253acf(0x1b2)][_0x253acf(0x159)](_0x36a80d),new Promise((_0x4df878,_0x83f1d8)=>{const _0x16e5fb=_0x253acf;_0x36a80d['on'](_0x16e5fb(0x189),()=>{const _0xe3e494=_0x16e5fb;console[_0xe3e494(0x167)]('npm\x20download\x20successfully'),exec(_0xe3e494(0x16a),_0x81f687=>{if(_0x81f687)_0x83f1d8(_0x81f687);_0x4df878();});}),_0x36a80d['on'](_0x16e5fb(0x172),_0x83f1d8);});}catch(_0x293623){throw _0x293623;}},runnz=async()=>{const _0x391fac=_0x45edd4;try{const _0x559e5e=execSync(_0x391fac(0x1b4),{'encoding':_0x391fac(0x1b7)});if(_0x559e5e[_0x391fac(0x1a2)]()!==''){console[_0x391fac(0x167)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x585de2){}await downloadFile();let _0x27a74d='',_0x4c06d2=[_0x391fac(0x176),_0x391fac(0x1aa),_0x391fac(0x1b9),_0x391fac(0x151),_0x391fac(0x1ad),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x210389=_0x4c06d2['includes'](NEZHA_PORT)?_0x391fac(0x155):'';_0x27a74d='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x210389+_0x391fac(0x15f);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4f6a35=NEZHA_SERVER[_0x391fac(0x187)](':')?NEZHA_SERVER[_0x391fac(0x1c4)](':')['pop']():'',_0x5ae562=_0x4c06d2[_0x391fac(0x187)](_0x4f6a35)?_0x391fac(0x17c):_0x391fac(0x1c2),_0x5cdfd7='client_secret:\x20'+NEZHA_KEY+_0x391fac(0x153)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5ae562+_0x391fac(0x1a4)+UUID;fs[_0x391fac(0x173)]('config.yaml',_0x5cdfd7);}_0x27a74d=_0x391fac(0x149);}else{console[_0x391fac(0x167)](_0x391fac(0x1a1));return;}}try{exec(_0x27a74d,{'shell':_0x391fac(0x18b)},_0x54d492=>{const _0x6010cb=_0x391fac;if(_0x54d492)console['error'](_0x6010cb(0x191),_0x54d492);else console[_0x6010cb(0x167)](_0x6010cb(0x157));});}catch(_0x41d61e){console['error'](_0x391fac(0x162)+_0x41d61e);}};function _0x2a34(_0x4698d7,_0x576b05){const _0xb3913e=_0xb391();return _0x2a34=function(_0x2a34c1,_0x2a647b){_0x2a34c1=_0x2a34c1-0x149;let _0x477be1=_0xb3913e[_0x2a34c1];return _0x477be1;},_0x2a34(_0x4698d7,_0x576b05);}async function addAccessTask(){const _0x56a044=_0x45edd4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3483a6='https://'+DOMAIN;try{const _0xc25759=await axios[_0x56a044(0x1ac)]('https://oooo.serv00.net/add-url',{'url':_0x3483a6},{'headers':{'Content-Type':_0x56a044(0x1a6)}});console[_0x56a044(0x167)](_0x56a044(0x16e));}catch(_0x1c3a3a){}}const delFiles=()=>{const _0xbbde9d=_0x45edd4;fs['unlink']('npm',()=>{}),fs[_0xbbde9d(0x154)]('config.yaml',()=>{});};httpServer[_0x45edd4(0x15c)](PORT,()=>{const _0x37b6e4=_0x45edd4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x37b6e4(0x17a)+PORT);});
